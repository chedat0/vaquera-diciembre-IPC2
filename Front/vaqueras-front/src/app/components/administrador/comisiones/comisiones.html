<div class="container">
    <h1>üí∞ Gesti√≥n de Comisiones</h1>

    <div *ngIf="error" class="alert error">{{error}}</div>
    <div *ngIf="exito" class="alert success">{{exito}}</div>

    <!-- Comisi√≥n Global -->
    <div class="card">
        <h2>Comisi√≥n Global de la Plataforma</h2>
        <div class="comision-actual">
            <span class="porcentaje">{{comisionGlobal}}%</span>
            <button class="btn-primary" (click)="mostrarEditarGlobal = !mostrarEditarGlobal">Modificar</button>
        </div>

        <div *ngIf="mostrarEditarGlobal" class="form-inline">
            <input type="number" [(ngModel)]="nuevaComisionGlobal" min="0" max="100" step="0.1" />
            <button (click)="actualizarComisionGlobal()" [disabled]="procesando">Guardar</button>
            <button (click)="mostrarEditarGlobal = false">Cancelar</button>
        </div>

        <p class="info">‚ö†Ô∏è Al cambiar la comisi√≥n global, las empresas con comisi√≥n superior ser√°n ajustadas
            autom√°ticamente</p>
    </div>

    <!-- Empresas con Comisi√≥n Especial -->
    <div class="card">
        <h2>Empresas con Comisi√≥n Espec√≠fica</h2>
        <table *ngIf="empresasConComision.length > 0">
            <thead>
                <tr>
                    <th>Empresa</th>
                    <th>Comisi√≥n</th>
                    <th>Acciones</th>
                </tr>
            </thead>
            <tbody>
                <tr *ngFor="let emp of empresasConComision">
                    <td>{{emp.nombreEmpresa}}</td>
                    <td>{{emp.comisionEspecifica}}%</td>
                    <td><button (click)="eliminarComisionEmpresa(emp.idEmpresa)">üóëÔ∏è Eliminar</button></td>
                </tr>
            </tbody>
        </table>
        <p *ngIf="empresasConComision.length === 0" class="empty">No hay empresas con comisi√≥n espec√≠fica</p>
    </div>
</div>