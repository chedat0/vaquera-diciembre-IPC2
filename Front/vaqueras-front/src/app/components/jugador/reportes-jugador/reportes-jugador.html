<div class="reportes-container">
    <div class="header">
        <h1>ğŸ“Š Mis Reportes</h1>
        <p>{{ filtroUsuario.usuarioNickname }}</p>
    </div>

    <div *ngIf="error" class="alert alert-error">{{ error }}</div>
    <div *ngIf="exito" class="alert alert-success">{{ exito }}</div>

    <div class="filtro-fechas-global">
        <h3>ğŸ“… Filtro de Fechas (para Historial de Gastos)</h3>
        <div class="form-row">
            <div class="form-group">
                <label>Fecha Inicio:</label>
                <input type="date" class="form-control" [(ngModel)]="filtroUsuario.fechaInicio"
                    [disabled]="procesando" />
            </div>
            <div class="form-group">
                <label>Fecha Fin:</label>
                <input type="date" class="form-control" [(ngModel)]="filtroUsuario.fechaFin" [disabled]="procesando" />
            </div>
        </div>
    </div>

    <div class="reportes-grid">
        <div class="reporte-card">
            <div class="reporte-icon">ğŸ’¸</div>
            <h3>Historial de Gastos</h3>
            <p>Detalle de todas tus compras y recargas en un perÃ­odo especÃ­fico.</p>
            <span class="tag">Requiere fechas</span>
            <button class="btn btn-primary" (click)="generarHistorialGastos()" [disabled]="procesando">
                {{ procesando ? 'â³ Generando...' : 'ğŸ“„ Generar PDF' }}
            </button>
        </div>

        <div class="reporte-card">
            <div class="reporte-icon">ğŸ“š</div>
            <h3>AnÃ¡lisis de Biblioteca</h3>
            <p>Resumen completo de tu biblioteca de juegos con estadÃ­sticas.</p>
            <span class="tag tag-instant">InstantÃ¡neo</span>
            <button class="btn btn-primary" (click)="generarAnalisisBiblioteca()" [disabled]="procesando">
                {{ procesando ? 'â³ Generando...' : 'ğŸ“„ Generar PDF' }}
            </button>
        </div>

        <div class="reporte-card">
            <div class="reporte-icon">ğŸ‘¨â€ğŸ‘©â€ğŸ‘§â€ğŸ‘¦</div>
            <h3>Biblioteca Familiar</h3>
            <p>Reporte del uso de biblioteca familiar y juegos compartidos.</p>
            <span class="tag tag-instant">InstantÃ¡neo</span>
            <button class="btn btn-primary" (click)="generarBibliotecaFamiliar()" [disabled]="procesando">
                {{ procesando ? 'â³ Generando...' : 'ğŸ“„ Generar PDF' }}
            </button>
        </div>
    </div>

    <div class="info-section">
        <h3>â„¹ï¸ InformaciÃ³n</h3>
        <ul>
            <li>Los reportes se generan en formato PDF</li>
            <li>Se abren automÃ¡ticamente en una nueva pestaÃ±a</li>
            <li>Puedes descargarlos o imprimirlos desde el visor de PDF</li>
        </ul>
    </div>
</div>