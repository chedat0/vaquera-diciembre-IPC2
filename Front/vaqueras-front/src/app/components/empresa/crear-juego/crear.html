<div class="container">
    <h1>üéÆ Crear Nuevo Juego</h1>

    <div *ngIf="error" class="alert error">{{error}}</div>
    <div *ngIf="exito" class="alert success">{{exito}}</div>

    <form class="form-card" (ngSubmit)="guardar()">
        <div class="form-group">
            <label>T√≠tulo *</label>
            <input type="text" [(ngModel)]="juego.titulo" name="titulo" required [disabled]="procesando" />
        </div>

        <div class="form-row">
            <div class="form-group">
                <label>Precio (USD) *</label>
                <input type="number" [(ngModel)]="juego.precio" name="precio" min="0" step="0.01" required
                    [disabled]="procesando" />
            </div>

            <div class="form-group">
                <label>Clasificaci√≥n *</label>
                <select [(ngModel)]="juego.clasificacion" name="clasificacion" required [disabled]="procesando">
                    <option value="E">E - Para todos</option>
                    <option value="E10+">E10+ - Mayores de 10</option>
                    <option value="T">T - Adolescentes</option>
                    <option value="M">M - Adultos</option>
                    <option value="AO">AO - Solo adultos</option>
                </select>
            </div>

            <div class="form-group">
                <label>Categor√≠a *</label>
                <select [(ngModel)]="juego.categorias" name="categoria" required [disabled]="procesando">
                    <option value="">Seleccione...</option>
                    <option *ngFor="let cat of categorias" [value]="cat.idCategoria">{{cat.nombre}}</option>
                </select>
            </div>
        </div>

        <div class="form-group">
            <label>Descripci√≥n *</label>
            <textarea [(ngModel)]="juego.descripcion" name="descripcion" rows="4" required
                [disabled]="procesando"></textarea>
        </div>

        <div class="form-group">
            <label>Im√°genes del Juego</label>
            <input type="file" (change)="seleccionarImagenes($event)" accept="image/*" multiple
                [disabled]="procesando" />
            <p class="hint">Puedes subir m√∫ltiples im√°genes. La primera ser√° la portada.</p>

            <div *ngIf="imagenesSeleccionadas.length > 0" class="imagenes-preview">
                <div *ngFor="let img of imagenesSeleccionadas; let i = index" class="imagen-preview">
                    <img [src]="img.preview" />
                    <span *ngIf="i === 0" class="badge-portada">Portada</span>
                    <button type="button" (click)="eliminarImagen(i)">‚úï</button>
                </div>
            </div>
        </div>

        <div class="form-actions">
            <button type="button" class="btn-secondary" (click)="cancelar()" [disabled]="procesando">Cancelar</button>
            <button type="submit" class="btn-primary" [disabled]="procesando">
                {{procesando ? 'Creando...' : 'Crear Juego'}}
            </button>
        </div>
    </form>
</div>